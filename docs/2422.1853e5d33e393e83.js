"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2422],{2422:(x,P,s)=>{s.r(P),s.d(P,{OvulationTrackerPage:()=>D});var u=s(467),y=s(2881),l=s(9893),t=s(1360);let _=(()=>{var o;class d{constructor(){}ngOnInit(){}}return(o=d).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.VBU({type:o,selectors:[["app-detailed-cycle"]],decls:2,vars:0,template:function(e,n){1&e&&(t.j41(0,"p"),t.EFF(1," detailed-cycle works!\n"),t.k0s())},encapsulation:2}),d})();var p=s(4797),f=s(225),v=s(8301),c=s(5195);function h(o,d){1&o&&(t.j41(0,"div",10)(1,"ion-text",11)(2,"h2"),t.EFF(3,"No Cycle Data"),t.k0s(),t.j41(4,"p"),t.EFF(5,"To see your ovulation tracking, please add your cycle info in the app settings."),t.k0s()()())}function b(o,d){if(1&o&&(t.j41(0,"div",19)(1,"span",20),t.EFF(2),t.k0s(),t.j41(3,"span",21),t.EFF(4),t.k0s(),t.nrm(5,"span",22),t.k0s()),2&o){const a=d.$implicit;t.AVh("period",a.isPeriod)("fertile",a.isFertile)("ovulation",a.isOvulation),t.R7$(2),t.JRh(a.day),t.R7$(2),t.JRh(a.date)}}function w(o,d){if(1&o&&(t.nrm(0,"div",12)(1,"app-animated-duck",13),t.j41(2,"div",14)(3,"ion-text",3)(4,"h1"),t.EFF(5),t.k0s(),t.j41(6,"p"),t.EFF(7),t.k0s()()(),t.j41(8,"div",15)(9,"ion-text",16),t.EFF(10,"Your Cycle"),t.k0s(),t.j41(11,"div",17),t.DNE(12,b,6,8,"div",18),t.k0s()()),2&o){const a=t.XpG();t.AVh("menstrual","Menstruation"===a.currentPhase)("follicular","Follicular"===a.currentPhase)("ovulation","Ovulation"===a.currentPhase)("luteal","Luteal"===a.currentPhase),t.R7$(),t.Y8G("ovulationPhase",a.currentPhase),t.R7$(4),t.JRh(a.currentPhase),t.R7$(2),t.Lme("",a.daysUntilNextEvent," days until ",a.nextEvent,""),t.R7$(5),t.Y8G("ngForOf",a.cycleDays)}}let D=(()=>{var o;class d{constructor(e,n){this.cycleService=e,this.modalCtrl=n,this.currentDate="",this.currentTime="",this.currentPhase="Loading...",this.nextEvent="",this.daysUntilNextEvent=0,this.cycleDays=[]}ngOnInit(){var e=this;return(0,u.A)(function*(){e.updateDateTime(),setInterval(()=>e.updateDateTime(),6e4),yield e.loadCycleData()})()}updateDateTime(){const e=new Date;this.currentDate=e.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),this.currentTime=e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}loadCycleData(){var e=this;return(0,u.A)(function*(){try{const n=yield e.cycleService.getCurrentCycle();if(!n)return console.warn("No cycle data available. Skipping setup modal."),e.currentPhase="No Data",e.nextEvent="N/A",e.daysUntilNextEvent=0,void(e.cycleDays=[]);e.calculateCyclePhases(n)}catch(n){console.error("Error loading cycle data:",n),e.currentPhase="Error"}})()}calculateCyclePhases(e){const n=new Date,r=new Date(e.startDate),m=e.cycleLength||28,g=Math.floor(.5*m),k=g-5,M=g+1,C=n.getTime()-r.getTime(),i=Math.floor(C/864e5)+1;i<=5?(this.currentPhase="Menstruation",this.nextEvent="Fertile Window",this.daysUntilNextEvent=6-i):i>=k&&i<=M?(this.currentPhase=i===g?"Ovulation":"Follicular",this.nextEvent=i<g?"Ovulation":"Luteal Phase",this.daysUntilNextEvent=g-i):i>g?(this.currentPhase="Luteal",this.nextEvent="Period",this.daysUntilNextEvent=m-i):(this.currentPhase="Follicular",this.nextEvent="Fertile Window",this.daysUntilNextEvent=k-i),this.generateWeeklyCycle(r,m)}generateWeeklyCycle(e,n){const r=Math.floor(.5*n),m=r-5,g=r+1,M=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];this.cycleDays=[];for(let C=0;C<7;C++){const i=new Date;i.setDate(i.getDate()+C);const O=Math.floor((i.getTime()-e.getTime())/864e5)+1;this.cycleDays.push({day:M[i.getDay()],date:i.getDate(),isPeriod:O<=5,isFertile:O>=m&&O<=g,isOvulation:O===r})}}showSetupModal(){var e=this;return(0,u.A)(function*(){console.log("Creating setup modal...");const n=yield e.modalCtrl.create({component:f.m,cssClass:"setup-modal"});console.log("Presenting setup modal..."),yield n.present(),console.log("Setup modal presented.");const{data:r}=yield n.onDidDismiss();console.log("Modal dismissed with data:",r),r&&(yield e.loadCycleData())})()}dismiss(){this.modalCtrl.dismiss()}openSettings(){var e=this;return(0,u.A)(function*(){yield(yield e.modalCtrl.create({component:p.SettingsPage})).present()})()}showDetailedView(){var e=this;return(0,u.A)(function*(){yield(yield e.modalCtrl.create({component:_,componentProps:{currentPhase:e.currentPhase,nextEvent:e.nextEvent,daysUntilNextEvent:e.daysUntilNextEvent}})).present()})()}}return(o=d).\u0275fac=function(e){return new(e||o)(t.rXU(c.I),t.rXU(l.W3))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-ovulation-tracker"]],decls:18,vars:4,consts:[["cycleContent",""],["slot","start"],[1,"date-time"],["color","light"],["slot","end"],[1,"avatar",3,"click"],["src","assets/images/default-avatar.png","alt","User Avatar"],["fill","clear",1,"strawberry-button",3,"click"],["src","assets/icon/strawberryBtn01.svg","alt","Close Tracker",1,"strawberry-icon"],["class","no-data-message ion-padding",4,"ngIf","ngIfElse"],[1,"no-data-message","ion-padding"],["color","medium",1,"ion-text-center"],[1,"phase-background"],[1,"phase-duck",3,"ovulationPhase"],[1,"phase-display"],[1,"weekly-cycle-panel"],[1,"panel-title"],[1,"week-days"],["class","day",3,"period","fertile","ovulation",4,"ngFor","ngForOf"],[1,"day"],[1,"day-name"],[1,"date"],[1,"phase-indicator"]],template:function(e,n){if(1&e){const r=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1)(3,"div",2)(4,"ion-text",3)(5,"h4"),t.EFF(6),t.k0s(),t.j41(7,"p"),t.EFF(8),t.k0s()()()(),t.j41(9,"ion-buttons",4)(10,"ion-avatar",5),t.bIt("click",function(){return t.eBV(r),t.Njj(n.openSettings())}),t.nrm(11,"img",6),t.k0s(),t.j41(12,"ion-button",7),t.bIt("click",function(){return t.eBV(r),t.Njj(n.dismiss())}),t.nrm(13,"img",8),t.k0s()()()(),t.j41(14,"ion-content"),t.DNE(15,h,6,0,"div",9)(16,w,13,13,"ng-template",null,0,t.C5r),t.k0s()}if(2&e){const r=t.sdS(17);t.R7$(6),t.JRh(n.currentDate),t.R7$(2),t.JRh(n.currentTime),t.R7$(7),t.Y8G("ngIf","No Data"===n.currentPhase)("ngIfElse",r)}},dependencies:[l.bv,l.mC,l.Jm,l.QW,l.W9,l.eU,l.IO,l.ai,v.W,y.MD,y.Sq,y.bT],styles:["[_nghost-%COMP%]{--text-color-light: #ffffff;--text-color-dark: #2c2c2c;--panel-bg-light: #ffffff;--panel-bg-dark: #1e1e1e;--panel-shadow-light: 0 6px 18px rgba(0, 0, 0, .1);--panel-shadow-dark: 0 6px 18px rgba(0, 0, 0, .3);--avatar-border-light: rgba(255, 255, 255, .3);--avatar-border-dark: rgba(0, 0, 0, .3)}ion-content[_ngcontent-%COMP%]{--background: transparent;position:relative}ion-header[_ngcontent-%COMP%]{border:none;box-shadow:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: transparent;--border-width: 0;--padding-top: calc(env(safe-area-inset-top, 0) + 12px) ;--padding-bottom: 6px;--padding-start: 16px;--padding-end: 16px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[slot=start][_ngcontent-%COMP%]   .date-time[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin:0;color:var(--text-color)}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[slot=start][_ngcontent-%COMP%]   .date-time[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin:0;opacity:.75;color:var(--text-color)}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[slot=end][_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:6px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[slot=end][_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:50%;overflow:hidden;border:2px solid var(--avatar-border)}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[slot=end][_ngcontent-%COMP%]   .strawberry-button[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--ripple-color: transparent}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[slot=end][_ngcontent-%COMP%]   .strawberry-button[_ngcontent-%COMP%]   .strawberry-icon[_ngcontent-%COMP%]{width:40px;height:40px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.2))}.phase-background[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;opacity:.3}.phase-background.menstrual[_ngcontent-%COMP%]{background:#ff9aa2}.phase-background.follicular[_ngcontent-%COMP%]{background:#a2e1ff}.phase-background.ovulation[_ngcontent-%COMP%]{background:#ffb7b2}.phase-background.luteal[_ngcontent-%COMP%]{background:#c7ceea}.phase-duck[_ngcontent-%COMP%]{position:fixed;top:45%;left:50%;transform:translate(-50%,-50%);width:160px;height:160px;z-index:1}.phase-display[_ngcontent-%COMP%]{position:absolute;top:60%;left:0;right:0;text-align:center;transform:translateY(-50%)}.phase-display[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3.5rem;font-family:Berlin Sans FB Demi,sans-serif;margin:0 0 8px;color:var(--text-color);text-shadow:0 2px 4px rgba(0,0,0,.2)}.phase-display[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;margin:0;color:var(--text-color);text-shadow:0 1px 2px rgba(0,0,0,.2)}.weekly-cycle-panel[_ngcontent-%COMP%]{position:absolute;bottom:16px;left:16px;right:16px;background:var(--panel-bg);border-radius:20px;padding:16px;box-shadow:var(--panel-shadow);z-index:2}.weekly-cycle-panel[_ngcontent-%COMP%]   .panel-title[_ngcontent-%COMP%]{text-align:center;font-weight:600;font-size:1rem;margin-bottom:12px;color:var(--text-color)}.weekly-cycle-panel[_ngcontent-%COMP%]   .week-days[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.weekly-cycle-panel[_ngcontent-%COMP%]   .week-days[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.weekly-cycle-panel[_ngcontent-%COMP%]   .week-days[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .day-name[_ngcontent-%COMP%]{font-size:.8rem;color:#666}.weekly-cycle-panel[_ngcontent-%COMP%]   .week-days[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500;color:#2c2c2c}.weekly-cycle-panel[_ngcontent-%COMP%]   .week-days[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .phase-indicator[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:50%;background:transparent}.weekly-cycle-panel[_ngcontent-%COMP%]   .week-days[_ngcontent-%COMP%]   .day.period[_ngcontent-%COMP%]   .phase-indicator[_ngcontent-%COMP%]{background:#ff6b6b}.weekly-cycle-panel[_ngcontent-%COMP%]   .week-days[_ngcontent-%COMP%]   .day.fertile[_ngcontent-%COMP%]   .phase-indicator[_ngcontent-%COMP%]{background:#ffd166}.weekly-cycle-panel[_ngcontent-%COMP%]   .week-days[_ngcontent-%COMP%]   .day.ovulation[_ngcontent-%COMP%]   .phase-indicator[_ngcontent-%COMP%]{background:#ef476f}.setup-modal[_ngcontent-%COMP%]{z-index:1050!important}ion-modal[_ngcontent-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]{display:block;max-height:90%;height:auto}@media (prefers-color-scheme: dark){[_nghost-%COMP%]{--text-color: var(--text-color-light);--panel-bg: var(--panel-bg-dark);--panel-shadow: var(--panel-shadow-dark);--avatar-border: var(--avatar-border-dark)}}@media (prefers-color-scheme: light){[_nghost-%COMP%]{--text-color: var(--text-color-dark);--panel-bg: var(--panel-bg-light);--panel-shadow: var(--panel-shadow-light);--avatar-border: var(--avatar-border-light)}}"]}),d})()},8301:(x,P,s)=>{s.d(P,{W:()=>_});var u=s(2881),y=s(4341),l=s(9893),t=s(1360);let _=(()=>{var p;class f{constructor(){this.duckImage="assets/images/default-duck.png"}ngOnChanges(){this.updateDuckImage()}updateDuckImage(){this.ovulationPhase?this.updateDuckByPhase():this.weatherCondition?this.updateDuckByWeather():this.duckImage="assets/images/default-duck.png"}updateDuckByPhase(){const c=this.ovulationPhase.toLowerCase();console.log("Updating duck for phase:",c),this.duckImage={menstruation:"assets/images/menstruation-duck.png",follicular:"assets/images/follicular-duck.png",ovulation:"assets/images/ovulation-duck.png",luteal:"assets/images/luteal-duck.png"}[c]||"assets/images/default-duck.png"}updateDuckByWeather(){const c=this.weatherCondition.toLowerCase();console.log("Updating duck for weather:",c),this.duckImage={rain:"assets/images/rain-duck.png",clear:"assets/images/sunny-duck.png",clouds:"assets/images/cloudy-duck.png",snow:"assets/images/snow-duck.png",thunderstorm:"assets/images/thunderstorm-duck.png"}[c]||"assets/images/default-duck.png"}}return(p=f).\u0275fac=function(c){return new(c||p)},p.\u0275cmp=t.VBU({type:p,selectors:[["app-animated-duck"]],inputs:{weatherCondition:"weatherCondition",ovulationPhase:"ovulationPhase"},features:[t.OA$],decls:2,vars:1,consts:[[1,"animated-duck"],["alt","Animated Duck",3,"src"]],template:function(c,h){1&c&&(t.j41(0,"div",0),t.nrm(1,"img",1),t.k0s()),2&c&&(t.R7$(),t.Y8G("src",h.duckImage,t.B4B))},dependencies:[u.MD,y.YN,l.bv],styles:[".animated-duck[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.animated-duck[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}"]}),f})()}}]);